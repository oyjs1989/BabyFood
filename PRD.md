# BabyFood 辅食智能助手 - 产品需求文档 (PRD)

## 一、产品概述

### 1.1 产品定位
一款基于AI反馈闭环的智能辅食决策系统，帮助新手父母解决"不知道今天该给宝宝吃什么"的核心痛点，通过动态学习和调整，提供个性化的辅食方案。

### 1.2 核心价值
- **决策支持**：从"不知道吃什么"到"AI智能推荐"
- **个性化适配**：根据宝宝年龄、地域、时节、体检状态动态调整
- **反馈闭环**：根据宝宝实际进食反馈，持续优化推荐策略
- **工具适配**：根据家庭现有工具，推荐可执行的食谱

### 1.3 目标用户
- 主要用户：0-3岁宝宝的新手父母
- 次要用户：爷爷奶奶等照顾者（需要更简单的操作界面）

---

## 二、核心功能需求

### 2.1 智能食谱推荐系统

#### 2.1.1 多维度筛选
- **年龄适配**：根据宝宝月龄推荐相应性状和营养需求的食谱
  - 6-8个月：泥状、糊状
  - 8-12个月：颗粒状、手指食物
  - 12-24个月：小块状、成人化简化版
- **地域适配**：基于食材可获得性推荐
  - 沿海城市：优先推荐海鲜类
  - 内陆地区：优先推荐河鲜/畜禽类
  - 季节性：优先推荐当季应季食材
- **时节适配**：考虑季节性饮食需求
  - 春季：祛湿、养肝
  - 夏季：清热、解暑
  - 秋季：润燥、养肺
  - 冬季：温补、暖胃

#### 2.1.2 工具筛选（场景A）
- 用户在设置中勾选家中现有工具：
  - 基础工具：锅、炒锅、蒸锅、电饭煲
  - 辅助工具：辅食机、破壁机、烤箱、微波炉
- 系统只推荐能够用现有工具制作的食谱
- **特殊处理**：当工具与食材冲突时，推荐近似制作方式
  - 示例：用户有炒锅但没有蒸锅，系统推荐"炒锅加水模拟蒸"的近似做法

### 2.2 动态一周计划生成

#### 2.2.1 计划生成逻辑
- **营养均衡优先**：确保一周内蛋白质、碳水化合物、维生素、矿物质均衡
- **食材不浪费优先**：优先使用冰箱现有食材
- **过敏回避**：自动屏蔽用户标记的过敏食材
- **体检状态调整**：根据体检数据动态调整食谱权重

#### 2.2.2 计划调整机制
- 用户可以手动调整计划
- 系统提供"智能调整"建议
- 支持批量调整（如：本周不吃海鲜）

### 2.3 体检数据智能分析

#### 2.3.1 数据录入方式
- **AI读取模式**：
  1. 用户上传体检单（拍照/文件）
  2. AI识别并分析体检数据
  3. AI生成分析结论（如：缺铁、体重偏轻、积食等）
  4. **确认模式（Human-in-the-loop）**：
     - 弹窗展示AI分析结论
     - 用户确认或修改结论
     - 用户设定数据有效期（默认7天，可自定义）

#### 2.3.2 数据映射规则
- **生长滞后**：推荐高热量、高蛋白食谱
- **缺铁性贫血**：推荐富含铁元素+维C辅助吸收的食谱
- **积食/消化不良**：推荐清淡、易消化食谱
- **过敏风险**：一键屏蔽致敏原食材

### 2.4 进食反馈闭环系统

#### 2.4.1 反馈收集方式
- **AI对话模式**：
  - 用户用自然语言描述进食情况
  - 示例："今天中午的胡萝卜肉泥他只吃了一口就吐了，好像是太干了"
- **快速填空模式**：
  - 选择：喜欢/不喜欢/一般
  - 选择：吃完了/剩了一半/只吃了一口
  - 选择：太干/太稀/太硬/太软/味道不好

#### 2.4.2 AI分析与选项生成
当用户反馈负面进食情况时，AI智能生成选项供用户选择：

**示例场景**：
- 用户输入："胡萝卜肉泥太干了，宝宝吐了"
- AI分析后弹出选项：
  - **A. 把【胡萝卜】列入不喜欢**（屏蔽食材）
  - **B. 下一餐尝试【更稀/更软】的口感**（调整性状）
  - **C. 只要不是【蒸】的就行**（更换烹饪法）
  - **D. 只是今天状态不好，不用调整**（忽略反馈）

#### 2.4.3 系统执行逻辑
- **选项A（屏蔽食材）**：
  - 将"胡萝卜"加入用户黑名单
  - 有效期：用户设定（默认30天）
  - 后续推荐自动排除含胡萝卜的食谱
- **选项B（调整性状）**：
  - 调整食谱推荐算法的性状参数
  - 下一餐优先推荐更稀/更软的同类食谱
- **选项C（更换烹饪法）**：
  - 将"蒸"的烹饪方式降权
  - 优先推荐其他烹饪方式
- **选项D（忽略）**：
  - 不做任何调整

### 2.5 食谱数据库结构

#### 2.5.1 基础字段
- 菜名、图片、简介
- 适用月龄范围
- 食材清单（含过敏原标记）
- 制作步骤（分步骤图文）
- 营养成分（热量、蛋白质、脂肪、碳水化合物、钙、铁等）
- 制作难度（简单/中等/困难）
- 制作时长

#### 2.5.2 智能化字段（支持AI深度分析）
- **口感标签**：软、硬、稀、稠、酥脆、绵密
- **含水量**：百分比
- **风味标签**：清淡、酸甜、咸香、原味
- **性状标签**：泥状、颗粒状、条状、块状
- **烹饪方式**：蒸、煮、炒、烤、炖、微波
- **营养素含量**：详细的维生素、矿物质含量
- **地域标签**：适合的地区
- **时节标签**：适合的季节
- **工具要求**：必需的工具清单

---

## 三、技术架构设计

### 3.1 整体架构
```
┌─────────────────────────────────────────┐
│           用户界面层 (UI)                │
│  Jetpack Compose + Material3           │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│         业务逻辑层 (ViewModel)          │
│  状态管理 + 业务规则                    │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│      AI智能处理层 (LLM Agent)          │
│  体检分析 + 反馈分析 + 选项生成        │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│          数据访问层 (Repository)         │
│  Room Database + 本地缓存              │
└─────────────────────────────────────────┘
```

### 3.2 核心算法模块

#### 3.2.1 推荐算法
- **协同过滤**：基于相似宝宝的喜好推荐
- **内容推荐**：基于营养均衡和多样性推荐
- **上下文推荐**：基于季节、工具、库存推荐

#### 3.2.2 反馈学习算法
- **负面反馈降权**：降低不喜欢的食材/烹饪方式权重
- **正面反馈加权**：增加喜欢的内容权重
- **时间衰减**：长期未反馈的标签自动降权

### 3.3 数据模型设计

#### 3.3.1 核心实体
- **Baby（宝宝）**：基本信息、过敏史、体检记录
- **Recipe（食谱）**：基础信息 + 智能化字段
- **Plan（计划）**：一周饮食计划
- **Feedback（反馈）**：进食反馈记录
- **HealthRecord（体检记录）**：体检数据 + AI分析结论

---

## 四、用户体验设计

### 4.1 核心用户流程

#### 4.1.1 首次使用流程
1. 用户注册/登录
2. 录入宝宝信息（姓名、出生日期、过敏史）
3. 设置家中工具
4. 上传近期体检单（可选）
5. AI生成第一周推荐计划
6. 用户确认或调整计划

#### 4.1.2 日常使用流程
1. 打开APP，查看今日推荐
2. 查看食谱详情，开始制作
3. 进食后，记录反馈（AI对话/快速填空）
4. AI根据反馈生成调整选项
5. 用户选择调整策略
6. 系统自动更新后续推荐

### 4.2 关键界面设计要点
- **首页**：今日推荐 + 快速反馈入口
- **计划页**：一周计划概览 + 调整入口
- **食谱详情**：步骤清晰 + 工具提示
- **反馈页**：AI对话界面 + 选项卡片
- **设置页**：工具管理 + 过敏管理 + 体检管理

---

## 五、MVP（最小可行性产品）范围

### 5.1 MVP核心功能
1. ✅ 基础食谱库（100+精选食谱）
2. ✅ 年龄筛选（6-24个月）
3. ✅ 工具筛选（基础工具）
4. ✅ 一周计划生成（静态模板）
5. ✅ 进食反馈收集（快速填空）
6. ✅ 基础调整逻辑（屏蔽食材）

### 5.2 MVP暂不包含
- ❌ AI体检分析（改为手动勾选标签）
- ❌ AI对话反馈（改为结构化选项）
- ❌ 地域/时节适配
- ❌ 动态计划调整算法
- ❌ 近似制作方式推荐

### 5.3 后续迭代计划
- **V1.1**：增加AI体检分析
- **V1.2**：增加AI对话反馈
- **V1.3**：增加地域/时节适配
- **V2.0**：完整动态推荐系统

---

## 六、数据来源与质量控制

### 6.1 食谱数据来源
- **PGC（专业生产内容）**：
  - 营养师团队审核
  - 儿科医生顾问
  - 专业厨师制作
- **数据验证**：
  - 每道食谱需经过营养师审核
  - 制作步骤需实际测试
  - 营养成分需专业计算

### 6.2 体检数据处理
- **AI识别准确率要求**：≥95%
- **人工审核机制**：关键健康指标需人工确认
- **数据安全**：体检数据本地加密存储

---

## 七、风险与挑战

### 7.1 技术风险
- **AI幻觉风险**：体检分析可能出错 → 解决：确认模式
- **推荐算法偏差**：可能推荐单一类型 → 解决：多样性约束
- **数据质量风险**：食谱数据不准确 → 解决：专业审核

### 7.2 产品风险
- **用户使用门槛**：反馈流程太复杂 → 解决：AI对话简化
- **数据冷启动**：初期数据不足 → 解决：精选100+高质量食谱
- **用户留存**：长期使用价值不明显 → 解决：持续学习优化

---

## 八、成功指标

### 8.1 核心指标
- **日活跃用户（DAU）**
- **周活跃用户（WAU）**
- **用户留存率**：次日留存≥40%，7日留存≥20%
- **反馈参与率**：≥60%的用户会记录反馈
- **推荐满意度**：≥80%的用户认可推荐

### 8.2 业务指标
- **食谱浏览量**
- **计划执行率**
- **反馈采纳率**
- **AI分析准确率**

---

## 九、开发优先级

### 9.1 第一阶段（MVP，3个月）
- 基础UI框架
- 食谱数据库
- 简单推荐逻辑
- 一周计划生成
- 基础反馈收集

### 9.2 第二阶段（V1.1，2个月）
- AI体检分析
- 确认模式
- 数据有效期管理

### 9.3 第三阶段（V1.2，2个月）
- AI对话反馈
- 选项生成逻辑
- 反馈学习算法

### 9.4 第四阶段（V2.0，3个月）
- 地域/时节适配
- 近似制作方式
- 完整动态推荐系统

---

## 十、附录

### 10.1 术语表
- **MVP**：Minimum Viable Product，最小可行性产品
- **PGC**：Professional Generated Content，专业生产内容
- **Human-in-the-loop**：人机协同，AI分析后需人工确认
- **TTL**：Time To Live，数据有效期

### 10.2 参考资料
- 儿童辅食添加指南（中国营养学会）
- 0-3岁儿童生长发育标准
- 辅食营养学基础

---

**文档版本**：v1.0
**最后更新**：2026-01-19
**文档状态**：待评审