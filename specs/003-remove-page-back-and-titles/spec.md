# Feature Specification: 移除页面返回和页面名称

**Feature Branch**: `003-remove-page-back-and-titles`
**Created**: 2026-01-31
**Status**: Draft
**Input**: User description: "移除页面返回和页面名称"

## Clarifications

### Session 2026-01-31
- Q: 当深层嵌套页面（如：宝宝详情 → 体检记录列表 → 添加体检记录）没有返回按钮时，系统应该如何处理导航？ → A: 完成操作后（保存/取消）自动返回到父级列表页
- Q: 当用户在表单页面有未保存的修改时，点击 Header 的"BabyFood"应用名称应该如何处理？ → A: 显示确认对话框，提示用户保存或放弃修改
- Q: 当应用处于离线状态时，导航行为是否应该有所不同？ → A: 导航行为不受离线状态影响，正常工作

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 移除页面顶部标题栏 (Priority: P1)

用户在使用应用时，不再需要在每个子页面顶部看到页面标题（如"宝宝详情"、"食谱详情"等）和返回按钮。移除这些元素后，页面内容区域将占据更多空间，提供更沉浸式的浏览体验。

**Why this priority**: 这是核心用户体验改进，移除标题栏可以释放更多屏幕空间用于展示实际内容，特别是在小屏幕设备上效果更为明显。

**Independent Test**: 可以通过导航到任何使用 AppScaffold 的子页面（如宝宝详情、食谱详情），确认页面顶部不再显示标题栏和返回按钮。

**Acceptance Scenarios**:

1. **Given** 用户从首页导航到宝宝详情页面，**When** 页面加载完成，**Then** 页面顶部不应该显示"宝宝详情"标题
2. **Given** 用户在宝宝详情页面，**When** 观察页面顶部区域，**Then** 不应该显示返回按钮（箭头图标）
3. **Given** 用户在食谱详情页面，**When** 观察页面布局，**Then** 页面内容应该直接从屏幕顶部开始，没有标题栏占用的空间

---

### User Story 2 - 统一全局导航到应用名称 (Priority: P2)

移除页面标题后，用户需要有一种方式返回到应用的主页面。通过点击全局 Header 中的"BabyFood"应用名称，用户可以从任何子页面返回到首页。

**Why this priority**: 这是必要的导航替代方案，确保用户在移除返回按钮后仍然能够方便地返回主页。

**Independent Test**: 可以通过从任何子页面点击 Header 中的"BabyFood"文字，确认能够导航到首页。

**Acceptance Scenarios**:

1. **Given** 用户在宝宝详情页面，**When** 点击 Header 中的"BabyFood"应用名称，**Then** 应该导航到首页（home）
2. **Given** 用户在食谱详情页面，**When** 点击 Header 中的"BabyFood"应用名称，**Then** 应该导航到首页
3. **Given** 用户在计划列表页面，**When** 点击 Header 中的"BabyFood"应用名称，**Then** 如果当前已经在首页，不应该发生导航

---

### User Story 3 - 底部导航作为主要导航方式 (Priority: P2)

用户在首页和主要功能页面（首页、食谱、计划、仓库、宝宝）之间切换时，应该使用底部导航栏而不是返回按钮。

**Why this priority**: 强化底部导航作为主要导航方式，符合移动应用的标准设计模式。

**Independent Test**: 可以通过在底部导航栏的各个标签之间切换，确认能够正确导航到对应页面。

**Acceptance Scenarios**:

1. **Given** 用户在首页，**When** 点击底部导航栏的"食谱"标签，**Then** 应该导航到食谱列表页面
2. **Given** 用户在食谱列表页面，**When** 点击底部导航栏的"宝宝"标签，**Then** 应该导航到宝宝列表页面
3. **Given** 用户在任何主要功能页面，**When** 点击底部导航栏的当前标签，**Then** 页面应该保持不变

---

### User Story 4 - 表单提交后自动返回列表 (Priority: P3)

用户在创建或编辑表单（如添加宝宝、添加食谱）完成后，系统应该自动返回到对应的列表页面，而不是需要手动点击返回按钮。

**Why this priority**: 简化用户操作流程，减少不必要的导航步骤。

**Independent Test**: 可以通过完成一个表单提交（如添加新宝宝），确认系统自动返回到宝宝列表页面。

**Acceptance Scenarios**:

1. **Given** 用户在添加宝宝表单页面，**When** 填写完整信息并点击保存，**Then** 系统应该自动返回到宝宝列表页面
2. **Given** 用户在编辑食谱表单页面，**When** 修改完成并点击保存，**Then** 系统应该自动返回到食谱列表页面
3. **Given** 用户在表单页面点击取消按钮，**Then** 系统应该返回到列表页面

---

### Edge Cases

- 当用户在深层嵌套的页面（如宝宝详情 → 体检记录列表 → 添加体检记录）完成操作后，系统应该自动返回到父级列表页面（例如：添加体检记录后返回到体检记录列表）
- 当用户在表单页面有未保存的修改时，如果尝试导航（如点击 Header 的"BabyFood"应用名称），系统应该显示确认对话框，提示用户保存或放弃修改
- 当应用处于离线状态时，导航行为不受影响，Header 导航和底部导航正常工作（导航是纯前端操作，不依赖网络连接）

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系统必须从所有使用 AppScaffold 的页面移除顶部标题栏（AppTopAppBar），包括标题文本和返回按钮
- **FR-002**: 系统必须在所有主要功能页面（首页、食谱列表、计划列表、仓库列表、宝宝列表）保留底部导航栏
- **FR-003**: 系统必须在全局 Header（AppHeader）中保留"BabyFood"应用名称，并提供点击导航到首页的功能
- **FR-004**: 当用户在非首页页面点击 Header 中的"BabyFood"应用名称时，系统必须导航到首页
- **FR-005**: 当用户在首页点击 Header 中的"BabyFood"应用名称时，系统不应该执行任何导航操作
- **FR-006**: 系统必须在表单页面（如 BabyFormScreen、RecipeFormScreen）提交成功后自动返回到对应的列表页面
- **FR-007**: 系统必须在表单页面点击取消按钮时返回到对应的列表页面
- **FR-010**: 系统必须在深层嵌套页面（如从体检记录列表进入添加体检记录）完成操作后自动返回到直接父级列表页面，而不是直接返回到首页
- **FR-008**: 系统必须在移除标题栏后，确保页面内容区域占据额外的标题栏空间（约 64dp）
- **FR-009**: 系统必须在移除返回按钮后，确保用户仍然能够通过其他方式（如 Header 应用名称、底部导航）进行导航
- **FR-011**: 当用户在表单页面有未保存的修改时，如果尝试导航（如点击 Header 的"BabyFood"应用名称），系统必须显示确认对话框，提供"保存"、"放弃修改"和"取消"三个选项
- **FR-012**: 系统必须在离线状态下保持导航功能正常工作，Header 导航和底部导航不应受网络状态影响

### Key Entities *(include if feature involves data)*

- **页面配置（AppBarConfig）**: 定义页面标题栏的配置，包括标题文本、是否显示返回按钮等
- **导航目标（Route）**: 应用中的导航目标，如 "home"、"recipes"、"baby/detail/{id}" 等
- **表单状态**: 表示表单的当前状态（编辑中、已保存、已取消）

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 所有子页面的内容区域高度增加约 64dp（标题栏占用空间）
- **SC-002**: 用户在 3 秒内能够通过 Header 应用名称返回到首页
- **SC-003**: 用户完成表单提交后，系统在 1 秒内自动返回到列表页面
- **SC-004**: 用户满意度提升（通过用户反馈收集，预期满意度提升 15%）

## Assumptions

- 用户习惯使用底部导航栏作为主要导航方式
- Header 中的"BabyFood"应用名称足够显眼，用户能够识别其为可点击元素
- 表单提交后的自动返回行为符合用户预期
- 移除标题栏不会影响用户对当前页面内容的理解

## Dependencies

- 依赖现有的 AppHeader 组件和导航系统
- 依赖所有使用 AppScaffold 的 Screen 组件（约 20+ 个页面）
- 依赖现有的底部导航栏实现
- 依赖导航路由配置（MainScreen 中的 NavHost）

## Out of Scope

- 保留底部导航栏的修改（本功能仅移除页面标题栏，不改变底部导航）
- Header 组件的其他功能（如用户头像、登录状态）保持不变
- 深层嵌套页面的导航优化（如三级页面的返回逻辑）
- 页面之间的动画过渡效果优化
- 表单页面未保存修改的提示功能